(function(a,b,c){var d=c(a),e=c(b),f=c.fancybox=function(){f.open.apply(this,arguments)},g=false,h=null,i=typeof b.createTouch!=="undefined";c.extend(f,{version:"2.0.5",defaults:{padding:30,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:true,autoResize:!i,autoCenter:!i,fitToView:true,aspectRatio:false,topRatio:.5,fixed:!(c.browser.msie&&c.browser.version<=6)&&!i,scrolling:"no",wrapCSS:"fancybox-default",arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3e3,preload:3,modal:false,loop:true,ajax:{dataType:"html",headers:{"X-fancyBox":true}},keys:{next:[13,32,34,39,40],prev:[8,33,37,38],close:[27]},index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0"'+(c.browser.msie?' allowtransparency="true"':"")+"></iframe>",swf:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>',error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<div title="Close" class="fancybox-item fancybox-close"></div>',next:'<a title="Next" class="fancybox-nav fancybox-next"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:true,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:true,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:300,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:300,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{speedIn:0,speedOut:300,opacity:.7,css:{cursor:"pointer"},closeClick:true},title:{type:"float"}},onCancel:c.noop,beforeLoad:c.noop,afterLoad:c.noop,beforeShow:c.noop,afterShow:c.noop,beforeClose:c.noop,afterClose:c.noop},group:{},opts:{},coming:null,current:null,isOpen:false,isOpened:false,wrap:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,b){f.close(true);if(a&&!c.isArray(a)){a=a instanceof c?c(a).get():[a]}f.isActive=true;f.opts=c.extend(true,{},f.defaults,b);if(c.isPlainObject(b)&&typeof b.keys!=="undefined"){f.opts.keys=b.keys?c.extend({},f.defaults.keys,b.keys):false}f.group=a;f._start(f.opts.index||0)},cancel:function(){if(f.coming&&false===f.trigger("onCancel")){return}f.coming=null;f.hideLoading();if(f.ajaxLoad){f.ajaxLoad.abort()}f.ajaxLoad=null;if(f.imgPreload){f.imgPreload.onload=f.imgPreload.onabort=f.imgPreload.onerror=null}},close:function(a){f.cancel();if(!f.current||false===f.trigger("beforeClose")){return}f.unbindEvents();if(!f.isOpen||a&&a[0]===true){c(".fancybox-wrap").stop().trigger("onReset").remove();f._afterZoomOut()}else{f.isOpen=f.isOpened=false;c(".fancybox-item, .fancybox-nav").remove();f.wrap.stop(true).removeClass("fancybox-opened");f.inner.css("overflow","hidden");f.transitions[f.current.closeMethod]()}},play:function(a){var b=function(){clearTimeout(f.player.timer)},d=function(){b();if(f.current&&f.player.isActive){f.player.timer=setTimeout(f.next,f.current.playSpeed)}},e=function(){b();c("body").unbind(".player");f.player.isActive=false;f.trigger("onPlayEnd")},g=function(){if(f.current&&(f.current.loop||f.current.index<f.group.length-1)){f.player.isActive=true;c("body").bind({"afterShow.player onUpdate.player":d,"onCancel.player beforeClose.player":e,"beforeLoad.player":b});d();f.trigger("onPlayStart")}};if(f.player.isActive||a&&a[0]===false){e()}else{g()}},next:function(){if(f.current){f.jumpto(f.current.index+1)}},prev:function(){if(f.current){f.jumpto(f.current.index-1)}},jumpto:function(a){if(!f.current){return}a=parseInt(a,10);if(f.group.length>1&&f.current.loop){if(a>=f.group.length){a=0}else if(a<0){a=f.group.length-1}}if(typeof f.group[a]!=="undefined"){f.cancel();f._start(a)}},reposition:function(a){if(f.isOpen){f.wrap.css(f._getPosition(a))}},update:function(a){if(f.isOpen){if(!g){h=setTimeout(function(){var b=f.current;if(g){g=false;if(b){if(b.autoResize||a&&a.type==="orientationchange"){if(b.autoSize){f.inner.height("auto");b.height=f.inner.height()}f._setDimension();if(b.canGrow){f.inner.height("auto")}}if(b.autoCenter){f.reposition()}f.trigger("onUpdate")}}},100)}g=true}},toggle:function(){if(f.isOpen){f.current.fitToView=!f.current.fitToView;f.update()}},hideLoading:function(){c("#fancybox-loading").remove()},showLoading:function(){f.hideLoading();c('<div id="fancybox-loading"><div></div></div>').click(f.cancel).appendTo("body")},getViewport:function(){return{x:d.scrollLeft(),y:d.scrollTop(),w:d.width(),h:d.height()}},unbindEvents:function(){if(f.wrap){f.wrap.unbind(".fb")}e.unbind(".fb");d.unbind(".fb")},bindEvents:function(){var a=f.current,b=a.keys;if(!a){return}d.bind("resize.fb, orientationchange.fb",f.update);if(b){e.bind("keydown.fb",function(a){var d;if(!a.ctrlKey&&!a.altKey&&!a.shiftKey&&!a.metaKey&&c.inArray(a.target.tagName.toLowerCase(),["input","textarea","select","button"])<0){d=a.keyCode;if(c.inArray(d,b.close)>-1){f.close();a.preventDefault()}else if(c.inArray(d,b.next)>-1){f.next();a.preventDefault()}else if(c.inArray(d,b.prev)>-1){f.prev();a.preventDefault()}}})}if(c.fn.mousewheel&&a.mouseWheel&&f.group.length>1){f.wrap.bind("mousewheel.fb",function(a,b){var d=c(a.target).get(0);if(d.clientHeight===0||d.scrollHeight===d.clientHeight&&d.scrollWidth===d.clientWidth){a.preventDefault();f[b>0?"prev":"next"]()}})}},trigger:function(a){var b,d=f[c.inArray(a,["onCancel","beforeLoad","afterLoad"])>-1?"coming":"current"];if(!d){return}if(c.isFunction(d[a])){b=d[a].apply(d,Array.prototype.slice.call(arguments,1))}if(b===false){return false}if(d.helpers){c.each(d.helpers,function(b,e){if(e&&typeof f.helpers[b]!=="undefined"&&c.isFunction(f.helpers[b][a])){f.helpers[b][a](e,d)}})}c.event.trigger(a+".fb")},isImage:function(a){return a&&a.match(/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i)},isSWF:function(a){return a&&a.match(/\.(swf)(.*)?$/i)},_start:function(a){var b={},d=f.group[a]||null,e,g,h,i;if(d&&(d.nodeType||d instanceof c)){e=true;if(c.metadata){b=c(d).metadata()}}b=c.extend(true,{},f.opts,{index:a,element:d},c.isPlainObject(d)?d:b);c.each(["href","title","content","type"],function(a,g){b[g]=f.opts[g]||e&&c(d).attr(g)||b[g]||null});if(typeof b.margin==="number"){b.margin=[b.margin,b.margin,b.margin,b.margin]}if(b.modal){c.extend(true,b,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{css:{cursor:"auto"},closeClick:false}}})}f.coming=b;if(false===f.trigger("beforeLoad")){f.coming=null;return}h=b.type;g=b.href||d;if(!h){if(e){i=c(d).data("fancybox-type");if(!i&&d.className){i=d.className.match(/fancybox\.(\w+)/);h=i?i[1]:null}}if(!h&&c.type(g)==="string"){if(f.isImage(g)){h="image"}else if(f.isSWF(g)){h="swf"}else if(g.match(/^#/)){h="inline"}}if(!h){h=e?"inline":"html"}b.type=h}if(h==="inline"||h==="html"){if(!b.content){if(h==="inline"){b.content=c(c.type(g)==="string"?g.replace(/.*(?=#[^\s]+$)/,""):g)}else{b.content=d}}if(!b.content||!b.content.length){h=null}}else if(!g){h=null}b.group=f.group;b.isDom=e;b.href=g;if(h==="image"){f._loadImage()}else if(h==="ajax"){f._loadAjax()}else if(h){f._afterLoad()}else{f._error("type")}},_error:function(a){f.hideLoading();c.extend(f.coming,{type:"html",autoSize:true,minHeight:0,hasError:a,content:f.coming.tpl.error});f._afterLoad()},_loadImage:function(){f.imgPreload=new Image;f.imgPreload.onload=function(){this.onload=this.onerror=null;f.coming.width=this.width;f.coming.height=this.height;f._afterLoad()};f.imgPreload.onerror=function(){this.onload=this.onerror=null;f._error("image")};f.imgPreload.src=f.coming.href;if(!f.imgPreload.width){f.showLoading()}},_loadAjax:function(){f.showLoading();f.ajaxLoad=c.ajax(c.extend({},f.coming.ajax,{url:f.coming.href,error:function(a,b){if(b!=="abort"){f._error("ajax",a)}else{f.hideLoading()}},success:function(a,b){if(b==="success"){f.coming.content=a;f._afterLoad()}}}))},_preloadImages:function(){var a=f.group,b=f.current,d=a.length,e,g;if(!b.preload||a.length<2){return}for(var h=1;h<=Math.min(b.preload,d-1);h++){e=a[(b.index+h)%d];g=c(e).attr("href")||e;if(g){(new Image).src=g}}},_afterLoad:function(){f.hideLoading();if(!f.coming||false===f.trigger("afterLoad",f.current)){f.coming=false;return}if(f.isOpened){c(".fancybox-item").remove();f.wrap.stop(true).removeClass("fancybox-opened");f.inner.css("overflow","hidden");f.transitions[f.current.prevMethod]()}else{c(".fancybox-wrap").stop().trigger("onReset").remove();f.trigger("afterClose")}f.unbindEvents();f.isOpen=false;f.current=f.coming;f.wrap=c(f.current.tpl.wrap).addClass("fancybox-"+(i?"mobile":"desktop")+" fancybox-tmp "+f.current.wrapCSS).appendTo("body");f.outer=c(".fancybox-outer",f.wrap).css("padding",f.current.padding+"px");f.inner=c(".fancybox-inner",f.wrap);f._setContent()},_setContent:function(){var a,b,d,e=f.current,g=e.type;switch(g){case"inline":case"ajax":case"html":a=e.content;if(a instanceof c){a=a.show().detach();if(a.parent().hasClass("fancybox-inner")){a.parents(".fancybox-wrap").trigger("onReset").remove()}c(f.wrap).bind("onReset",function(){a.appendTo("body").hide()})}if(e.autoSize){b=c('<div class="fancybox-tmp '+f.current.wrapCSS+'"></div>').appendTo("body").append(a);e.width=b.width();e.height=b.height();b.width(f.current.width);if(b.height()>e.height){b.width(e.width+1);e.width=b.width();e.height=b.height()}a=b.contents().detach();b.remove()}break;case"image":a=e.tpl.image.replace("{href}",e.href);e.aspectRatio=true;break;case"swf":a=e.tpl.swf.replace(/\{width\}/g,e.width).replace(/\{height\}/g,e.height).replace(/\{href\}/g,e.href);break}if(g==="iframe"){a=c(e.tpl.iframe.replace("{rnd}",(new Date).getTime())).attr("scrolling",e.scrolling);e.scrolling="auto";if(e.autoSize){a.width(e.width);f.showLoading();a.data("ready",false).appendTo(f.inner).bind({onCancel:function(){c(this).unbind();f._afterZoomOut()},load:function(){var a=c(this),b;try{if(this.contentWindow.document.location){b=a.contents().find("body").height()+12;a.height(b)}}catch(d){e.autoSize=false}if(a.data("ready")===false){f.hideLoading();if(b){f.current.height=b}f._beforeShow();a.data("ready",true)}else if(b){f.update()}}}).attr("src",e.href);return}else{a.attr("src",e.href)}}else if(g==="image"||g==="swf"){e.autoSize=false;e.scrolling="visible"}f.inner.append(a);f._beforeShow()},_beforeShow:function(){f.coming=null;f.trigger("beforeShow");f._setDimension();f.wrap.hide().removeClass("fancybox-tmp");f.bindEvents();f._preloadImages();f.transitions[f.isOpened?f.current.nextMethod:f.current.openMethod]()},_setDimension:function(){var a=f.wrap,b=f.outer,d=f.inner,e=f.current,g=f.getViewport(),h=e.margin,i=e.padding*2,j=e.width,k=e.height,l=e.maxWidth,m=e.maxHeight,n=e.minWidth,o=e.minHeight,p,q,r;g.w-=h[1]+h[3];g.h-=h[0]+h[2];if(j.toString().indexOf("%")>-1){j=(g.w-i)*parseFloat(j)/100}if(k.toString().indexOf("%")>-1){k=(g.h-i)*parseFloat(k)/100}p=j/k;j+=i;k+=i;if(e.fitToView){l=Math.min(g.w,l);m=Math.min(g.h,m)}if(e.aspectRatio){if(j>l){j=l;k=(j-i)/p+i}if(k>m){k=m;j=(k-i)*p+i}if(j<n){j=n;k=(j-i)/p+i}if(k<o){k=o;j=(k-i)*p+i}}else{j=Math.max(n,Math.min(j,l));k=Math.max(o,Math.min(k,m))}j=Math.round(j);k=Math.round(k);c(a.add(b).add(d)).width("auto").height("auto");d.width(j-i).height(k-i);a.width(j);q=a.height();if(j>l||q>m){while((j>l||q>m)&&j>n&&q>o){k=k-10;if(e.aspectRatio){j=Math.round((k-i)*p+i);if(j<n){j=n;k=(j-i)/p+i}}else{j=j-10}d.width(j-i).height(k-i);a.width(j);q=a.height()}}e.dim={width:j,height:q};e.canGrow=e.autoSize&&k>o&&k<m;e.canShrink=false;e.canExpand=false;if(j-i<e.width||k-i<e.height){e.canExpand=true}else if((j>g.w||q>g.h)&&j>n&&k>o){e.canShrink=true}r=q-i;f.innerSpace=r-d.height();f.outerSpace=r-b.height()},_getPosition:function(a){var b=f.current,c=f.getViewport(),d=b.margin,e=f.wrap.width()+d[1]+d[3],g=f.wrap.height()+d[0]+d[2],h={position:"absolute",top:d[0]+c.y,left:d[3]+c.x};if(b.fixed&&(!a||a[0]===false)&&g<=c.h&&e<=c.w){h={position:"fixed",top:d[0],left:d[3]}}h.top=Math.ceil(Math.max(h.top,h.top+(c.h-g)*b.topRatio))+"px";h.left=Math.ceil(Math.max(h.left,h.left+(c.w-e)*.5))+"px";return h},_afterZoomIn:function(){var a=f.current,b=a.scrolling;f.isOpen=f.isOpened=true;f.wrap.addClass("fancybox-opened").css("overflow","visible");f.update();f.inner.css("overflow",b==="yes"?"scroll":b==="no"?"hidden":b);if(a.closeClick||a.nextClick){f.inner.css("cursor","pointer").bind("click.fb",a.nextClick?f.next:f.close)}if(a.closeBtn){c(a.tpl.closeBtn).appendTo(f.outer).bind("click.fb",f.close)}if(a.arrows&&f.group.length>1){if(a.loop||a.index>0){c(a.tpl.prev).appendTo(f.inner).bind("click.fb",f.prev)}if(a.loop||a.index<f.group.length-1){c(a.tpl.next).appendTo(f.inner).bind("click.fb",f.next)}}f.trigger("afterShow");if(f.opts.autoPlay&&!f.player.isActive){f.opts.autoPlay=false;f.play()}},_afterZoomOut:function(){f.trigger("afterClose");f.wrap.trigger("onReset").remove();c.extend(f,{group:{},opts:{},current:null,isActive:false,isOpened:false,isOpen:false,wrap:null,outer:null,inner:null})}});f.transitions={getOrigPosition:function(){var a=f.current,b=a.element,d=a.padding,e=c(a.orig),g={},h=50,i=50,j;if(!e.length&&a.isDom&&c(b).is(":visible")){e=c(b).find("img:first");if(!e.length){e=c(b)}}if(e.length){g=e.offset();if(e.is("img")){h=e.outerWidth();i=e.outerHeight()}}else{j=f.getViewport();g.top=j.y+(j.h-i)*.5;g.left=j.x+(j.w-h)*.5}g={top:Math.ceil(g.top-d)+"px",left:Math.ceil(g.left-d)+"px",width:Math.ceil(h+d*2)+"px",height:Math.ceil(i+d*2)+"px"};return g},step:function(a,b){var c,d,e;if(b.prop==="width"||b.prop==="height"){d=e=Math.ceil(a-f.current.padding*2);if(b.prop==="height"){c=(a-b.start)/(b.end-b.start);if(b.start>b.end){c=1-c}d-=f.innerSpace*c;e-=f.outerSpace*c}f.inner[b.prop](d);f.outer[b.prop](e)}},zoomIn:function(){var a=f.wrap,b=f.current,d,e,g=b.dim;if(b.openEffect==="elastic"){e=c.extend({},g,f._getPosition(true));delete e.position;d=this.getOrigPosition();if(b.openOpacity){d.opacity=0;e.opacity=1}f.outer.add(f.inner).width("auto").height("auto");a.css(d).show();a.animate(e,{duration:b.openSpeed,easing:b.openEasing,step:this.step,complete:f._afterZoomIn})}else{a.css(c.extend({},g,f._getPosition()));if(b.openEffect==="fade"){a.fadeIn(b.openSpeed,f._afterZoomIn)}else{a.show();f._afterZoomIn()}}},zoomOut:function(){var a=f.wrap,b=f.current,c;if(b.closeEffect==="elastic"){if(a.css("position")==="fixed"){a.css(f._getPosition(true))}c=this.getOrigPosition();if(b.closeOpacity){c.opacity=0}a.animate(c,{duration:b.closeSpeed,easing:b.closeEasing,step:this.step,complete:f._afterZoomOut})}else{a.fadeOut(b.closeEffect==="fade"?b.closeSpeed:0,f._afterZoomOut)}},changeIn:function(){var a=f.wrap,b=f.current,c;if(b.nextEffect==="elastic"){c=f._getPosition(true);c.opacity=0;c.top=parseInt(c.top,10)-200+"px";a.css(c).show().animate({opacity:1,top:"+=200px"},{duration:b.nextSpeed,easing:b.nextEasing,complete:f._afterZoomIn})}else{a.css(f._getPosition());if(b.nextEffect==="fade"){a.hide().fadeIn(b.nextSpeed,f._afterZoomIn)}else{a.show();f._afterZoomIn()}}},changeOut:function(){var a=f.wrap,b=f.current,d=function(){c(this).trigger("onReset").remove()};a.removeClass("fancybox-opened");if(b.prevEffect==="elastic"){a.animate({opacity:0,top:"+=200px"},{duration:b.prevSpeed,easing:b.prevEasing,complete:d})}else{a.fadeOut(b.prevEffect==="fade"?b.prevSpeed:0,d)}}};f.helpers.overlay={overlay:null,update:function(){var a,f,g;this.overlay.width(0).height(0);if(c.browser.msie){f=Math.max(b.documentElement.scrollWidth,b.body.scrollWidth);g=Math.max(b.documentElement.offsetWidth,b.body.offsetWidth);a=f<g?d.width():f}else{a=e.width()}this.overlay.width(a).height(e.height())},beforeShow:function(a){if(this.overlay){return}a=c.extend(true,{speedIn:"fast",closeClick:true,opacity:1,css:{background:"white"}},a);this.overlay=c('<div id="fancybox-overlay"></div>').css(a.css).appendTo("body");this.update();if(a.closeClick){this.overlay.bind("click.fb",f.close)}d.bind("resize.fb",c.proxy(this.update,this));this.overlay.fadeTo(a.speedIn,a.opacity)},onUpdate:function(){this.update()},afterClose:function(a){if(this.overlay){this.overlay.fadeOut(a.speedOut||0,function(){c(this).remove()})}this.overlay=null}};f.helpers.title={beforeShow:function(a){var b,d=f.current.title;if(d){b=c('<div class="fancybox-title fancybox-title-'+a.type+'-wrap">'+d+"</div>").appendTo("body");if(a.type==="float"){b.width(b.width());f.current.margin[2]+=Math.abs(parseInt(b.css("margin-bottom"),10))}b.appendTo(a.type==="over"?f.inner:a.type==="outside"?f.wrap:f.outer)}}};c.fn.fancybox=function(a){var b=c(this),d=this.selector||"",g,h=function(e){var h=this,i="rel",j=h[i],k=g;if(!(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)){e.preventDefault();if(!j){i="data-fancybox-group";j=c(h).attr("data-fancybox-group")}if(j&&j!==""&&j!=="nofollow"){h=d.length?c(d):b;h=h.filter("["+i+'="'+j+'"]');k=h.index(this)}a.index=k;f.open(h,a)}};a=a||{};g=a.index||0;if(d){e.undelegate(d,"click.fb-start").delegate(d,"click.fb-start",h)}else{b.unbind("click.fb-start").bind("click.fb-start",h)}return this}})(window,document,jQuery)